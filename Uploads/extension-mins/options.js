/* Thanks to : http://javascript-minifier.com/ */
function getH(e){return Math.round(Math.floor(e/60))}function getM(e){return e%60}function formatTime(e){var t=getH(e),n=getM(e),m="";return 0!=t&&(m+=t,m+=" hour",1!=t&&(m+="s"),m+=" "),0!=n&&(m=m+""+n+" minute",1!=n&&(m+="s")),m}function updateSpeeds(){var e=document.getElementById("walkingSpeedSlider").value,t=Math.round(.62*e*10)/10;document.getElementById("walkingSpeedInfo").innerHTML=e+" kmph ("+t+" mph)";var n=document.getElementById("bikingSpeedSlider").value;t=Math.round(.62*n*10)/10,document.getElementById("bikingSpeedInfo").innerHTML=n+" kmph ("+t+" mph)",saveSpeedTimeSettings()}function updateTimes(){var e=document.getElementById("walkingTimeSlider").value,t=formatTime(e);document.getElementById("walkingTimeInfo").innerHTML=t;var n=document.getElementById("bikingTimeSlider").value;t=formatTime(n),document.getElementById("bikingTimeInfo").innerHTML=t,saveSpeedTimeSettings()}function refreshSliders(e,t,n,m,d,a){document.getElementById("bikingTimeSlider").value=60*d+a,document.getElementById("walkingTimeSlider").value=60*t+n,document.getElementById("walkingSpeedSlider").value=e/1e3,document.getElementById("bikingSpeedSlider").value=m/1e3,updateSpeeds(),updateTimes()}function refreshMapWithL(e,t){document.getElementById("map").style.opacity="0.5";var n=document.getElementById("map").src;document.getElementById("map").onerror=function(){document.getElementById("map").src=n,offlineMsg()},document.getElementById("map").src="https://maps.googleapis.com/maps/api/staticmap?center="+e+","+t+"&zoom=13&size=600x300&maptype=roadmap&markers=color:orange|"+e+","+t,document.getElementById("map").onload=function(){document.getElementById("map").style.opacity="1.0",document.getElementById("map").src!=n&&(document.getElementById("map").style.webkitFilter="none",document.getElementById("overlay").style.display="none")}}function refreshMap(){document.getElementById("map").style.opacity="0.5";var e=document.getElementById("whereAmIInput").value;loc==e&&(document.getElementById("map").style.opacity="1.0"),loc=e;var t=document.getElementById("map").src;document.getElementById("map").onerror=function(){document.getElementById("map").src=t,offlineMsg()},document.getElementById("map").src="https://maps.googleapis.com/maps/api/staticmap?center="+e+"&zoom=13&size=600x300&maptype=roadmap&markers=color:orange|"+e,document.getElementById("map").onload=function(){document.getElementById("map").style.opacity="1.0",document.getElementById("map").src!=t&&(document.getElementById("map").style.webkitFilter="none",document.getElementById("overlay").style.display="none")}}function offlineMsg(){document.getElementById("map").style.webkitFilter="blur(5px)",document.getElementById("overlay").style.display="block",document.getElementById("overlayMessage").innerHTML="Oops, it looks like you're offline! Try again later! <i class='fa fa-frown-o'></i>"}function notFoundMsg(){document.getElementById("map").style.webkitFilter="blur(5px)",document.getElementById("overlay").style.display="block",document.getElementById("overlayMessage").innerHTML="We couldn't find that place - try again! <i class='fa fa-frown-o'></i>"}function saveSpeedTimeSettings(){var e=1e3*document.getElementById("walkingSpeedSlider").value,t=1e3*document.getElementById("bikingSpeedSlider").value,n=document.getElementById("walkingTimeSlider").value,m=getH(n),d=getM(n),a=document.getElementById("bikingTimeSlider").value,o=getH(a),l=getM(a);chrome.storage.sync.set({mWS:e,mBS:t,mWTH:m,mWTM:d,mBTH:o,mBTM:l},function(){})}function save(){document.getElementById("save").innerHTML='Saving <i class="fa fa-spinner fa-spin"></i>';var e=document.getElementById("whereAmIInput").value;e!=loc&&refreshMap(),$.ajax({type:"GET",url:"https://maps.googleapis.com/maps/api/geocode/json?address="+e,success:function(e){var t=e.results;if(t.length>0){var n=e.results[0].geometry.location.lat,m=e.results[0].geometry.location.lng,d=e.results[0].formatted_address;chrome.storage.sync.set({latitude:n,longitude:m,address:d,exists:!0},function(){document.getElementById("save").innerHTML="Save";var e=document.getElementById("saveAlert");e.innerHTML="Saved Home as "+d+"!  <i class = 'fa fa-thumbs-up'></i>",document.getElementById("whereAmIInput").value=d,$(e).fadeIn(),setInterval(function(){$(e).fadeOut()},5e3)}),document.getElementById("map").style.opacity="1.0",document.getElementById("map").style.webkitFilter="none",document.getElementById("overlay").style.display="none"}else{document.getElementById("map").onload=function(){notFoundMsg(),document.getElementById("save").innerHTML="Save"};var a=document.getElementById("map").src;document.getElementById("map").src=a}},error:function(){document.getElementById("save").innerHTML="Save"}})}function preInitialize(){document.getElementById("submit").addEventListener("click",refreshMap),document.getElementById("save").addEventListener("click",save),document.getElementById("homeForm").addEventListener("submit",function(e){e.preventDefault(),refreshMap()}),chrome.storage.sync.get({address:"Cornell University",latitude:42.4534492,longitude:-76.4735027,mWS:5e3,mBS:14e3,mWTH:0,mBTH:0,mWTM:30,mBTM:30,exists:!1},function(e){document.getElementById("whereAmIInput").value=e.address,refreshMapWithL(e.latitude,e.longitude),refreshSliders(e.mWS,e.mWTH,e.mWTM,e.mBS,e.mBTH,e.mBTM),0==e.exists&&(document.getElementById("welcome").style.display="block")}),document.getElementById("walkingSpeedSlider").addEventListener("change",updateSpeeds),document.getElementById("bikingSpeedSlider").addEventListener("change",updateSpeeds),document.getElementById("walkingTimeSlider").addEventListener("change",updateTimes),document.getElementById("bikingTimeSlider").addEventListener("change",updateTimes)}console.log("Thanks for using Wector! Visit us at http://wector.ml");var loc="";window.addEventListener("load",preInitialize);